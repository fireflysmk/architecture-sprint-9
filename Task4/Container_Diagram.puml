@startuml Container_Diagram_Stavki
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title Диаграмма контейнеров: Передача ставок

Person(оператор, "Оператор кол-центра")

System_Boundary(абс_boundary, "АБС") {
    Container(модуль_ставок, "Модуль ставок", "PL/SQL", "Расчет и хранение ставок")
    Container(api_абс, "API ставок", "REST", "Предоставляет данные CRM")
    Container(экспорт_файлов, "Экспорт в CSV", "Python", "Генерация файла для SFTP")
}

System_Boundary(crm_boundary, "CRM кол-центра") {
    Container(crm_бэкенд, "Бэкенд CRM", "Java Spring", "Обработка API-запросов")
    Container(crm_интерфейс, "Интерфейс оператора", "React", "Отображение ставок")
}

System(sftp, "SFTP-сервер", "Хранит файлы для партнера")
System(партнер, "Партнерский кол-центр", "Внешняя система")

Rel(модуль_ставок, api_абс, "Передает данные", "JDBC")
Rel(api_абс, крм_бэкенд, "Запросы ставок", "REST/JSON")
Rel(crm_бэкенд, крм_интерфейс, "Данные для UI", "WebSocket")
Rel(crm_интерфейс, оператор, "Показывает ставки", "HTTP")
Rel(модуль_ставок, экспорт_файлов, "Выгрузка данных", "CSV")
Rel(экспорт_файлов, sftp, "Загрузка файла", "SFTP/PGP")
Rel(sftp, партнер, "Скачивание файла", "SFTP")

@enduml